!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Navigation=t()}}(function(){return function t(e,r,n){function i(o,s){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var h=r[o]={exports:{}};e[o][0].call(h.exports,function(t){var r=e[o][1][t];return i(r?r:t)},h,h.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){var n=t("./StateContext"),i=t("./StateController"),a=t("./config/Dialog"),o=t("./config/State"),s=t("./config/Transition"),u=t("./config/StateInfoConfig"),f=t("./history/HistoryNavigator"),h=t("./history/HashHistoryManager"),l=t("./history/HTML5HistoryManager"),p=t("./Crumb"),c=t("./StateHandler"),g=t("./StateRouter"),d=t("./NavigationSettings"),v=t("./routing/Route"),y=t("./routing/Router"),m=t("./settings"),S=function(){function t(){}return t.Dialog=a,t.State=o,t.Transition=s,t.StateInfoConfig=u,t.HashHistoryManager=h,t.HTML5HistoryManager=l,t.Crumb=p,t.NavigationSettings=d,t.StateContext=n,t.StateController=i,t.StateHandler=c,t.StateRouter=g,t.Route=v,t.Router=y,t.settings=m,t.start=function(t){m.historyManager.init(),i.navigateLink(t?t:m.historyManager.getCurrentUrl())},t}();f.navigateHistory=function(){n.url!==m.historyManager.getCurrentUrl()&&i.navigateLink(m.historyManager.getCurrentUrl())},e.exports=S},{"./Crumb":5,"./NavigationSettings":8,"./StateContext":11,"./StateController":12,"./StateHandler":13,"./StateRouter":14,"./config/Dialog":17,"./config/State":18,"./config/StateInfoConfig":19,"./config/Transition":20,"./history/HTML5HistoryManager":21,"./history/HashHistoryManager":22,"./history/HistoryNavigator":23,"./routing/Route":24,"./routing/Router":25,"./settings":27}],2:[function(t,e,r){var n=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},i=t("./TypeConverter"),a=function(t){function e(e){t.call(this),this.converter=e}return n(e,t),e.prototype.getType=function(){return this.converter.getType()+"array"},e.prototype.convertFrom=function(t){var r=[];if(0!==t.length)for(var n=t.split(e.SEPARATOR1),i=0;i<n.length;i++)r.push(0!==n[i].length?this.converter.convertFrom(n[i].replace(new RegExp(e.SEPARATOR2,"g"),e.SEPARATOR)):null);return r},e.prototype.convertTo=function(t){for(var r=[],n=t,i=0;i<n.length;i++)null!=n[i]&&r.push(this.converter.convertTo(n[i]).replace(new RegExp(e.SEPARATOR,"g"),e.SEPARATOR2));return r.join(e.SEPARATOR1)},e.SEPARATOR="-",e.SEPARATOR1="1-",e.SEPARATOR2="2-",e}(i);e.exports=a},{"./TypeConverter":16}],3:[function(t,e,r){var n=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},i=t("./TypeConverter"),a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.getType=function(){return"boolean"},e.prototype.convertFrom=function(t){if("true"!==t&&"false"!==t)throw Error(t+" is not a valid boolean");return"true"===t},e.prototype.convertTo=function(t){return t.toString()},e}(i);e.exports=a},{"./TypeConverter":16}],4:[function(t,e,r){var n=t("./ArrayConverter"),i=t("./BooleanConverter"),a=t("./NumberConverter"),o=t("./StringConverter"),s=function(){function t(){}return t.init=function(){this.typeArray=[],this.typeArray.push(function(){return new o}),this.typeArray.push(function(){return new i}),this.typeArray.push(function(){return new a}),this.keyToConverterList={},this.typeToKeyList={};for(var t=0;t<this.typeArray.length;t++)this.keyToConverterList[t.toString()]=this.typeArray[t](),this.keyToConverterList["a"+t]=new n(this.typeArray[t]()),this.typeToKeyList[this.typeArray[t]().getType()]=t.toString(),this.typeToKeyList[new n(this.typeArray[t]()).getType()]="a"+t},t.getKey=function(t){return this.typeToKeyList[t]},t.getKeyFromObject=function(t){var e,r=typeof t;if("[object Array]"===Object.prototype.toString.call(t)){var n=t;e="string";for(var i=0;i<n.length;i++)if(null!=n[i]){e=typeof n[i];break}r=e+"array"}if(!this.typeToKeyList[r])throw new Error(r);return this.typeToKeyList[r]},t.getConverter=function(t){return this.keyToConverterList[t]},t}();s.init(),e.exports=s},{"./ArrayConverter":2,"./BooleanConverter":3,"./NumberConverter":9,"./StringConverter":15}],5:[function(t,e,r){var n=t("./NavigationData"),i=function(){function t(t,e,r,i){this.data=t?t:{},this.state=e,this.last=i,this.title=e.title,this.navigationLink=r,n.setDefaults(this.data,this.state.defaults)}return t}();e.exports=i},{"./NavigationData":7}],6:[function(t,e,r){var n=t("./Crumb"),i=t("./NavigationData"),a=t("./ReturnDataManager"),o=t("./settings"),s=t("./StateContext"),u=t("./config/StateInfoConfig"),f=function(){function t(){}return t.buildCrumbTrail=function(){var t=this.getCrumbs(!1);s.previousState&&t.push(new n(this.returnData,s.previousState,this.getHref(s.previousState,this.returnData,null),!1)),t=s.state.stateHandler.truncateCrumbTrail(s.state,t),t.reverse();for(var e="",r=0;r<t.length;r++)e+=this.CRUMB_1_SEP+t[r].state.id+this.CRUMB_2_SEP,e+=a.formatReturnData(t[r].state,t[r].data);this.crumbTrail=e?e:null},t.getCrumbs=function(t){for(var e=[],r=0,i=this.crumbTrail,o=i?i.split(this.CRUMB_1_SEP).length-1:0,s=!0;o>r;){var u=i.substring(this.CRUMB_1_SEP.length).split(this.CRUMB_2_SEP)[0],f=this.getState(u),h={},l=i.substring(i.indexOf(this.CRUMB_2_SEP)+this.CRUMB_2_SEP.length).split(this.CRUMB_1_SEP)[0];l&&(h=a.parseReturnData(l,f));var p=i.indexOf(this.CRUMB_1_SEP,1);i=-1!=p?i.substring(p):"",e.push(new n(h,f,this.getHref(f,h,null),t&&s)),s=!1,r++}return e.reverse(),e},t.getState=function(t){if(!t)return null;var e=t.split("-");return u._dialogs[+e[0]]._states[+e[1]]},t.getHref=function(t,e,r){var n={};n[o.stateIdKey]=t.id,t.trackCrumbTrail&&s.state&&(n[o.previousStateIdKey]=s.state.id),e=i.clone(e),i.setDefaults(e,t.defaults);for(var u in e)null==e[u]||!e[u].toString()||o.router.supportsDefaults&&e[u]===t.defaults[u]||(n[u]=a.formatURLObject(u,e[u],t));if(t.trackCrumbTrail&&s.state){var f=a.formatReturnData(s.state,r);f&&(n[o.returnDataKey]=f)}return this.crumbTrail&&t.trackCrumbTrail&&(n[o.crumbTrailKey]=this.crumbTrail),t.stateHandler.getNavigationLink(t,n)},t.getRefreshHref=function(t){return this.getHref(s.state,t,null)},t.CRUMB_1_SEP="4_",t.CRUMB_2_SEP="5_",t}();e.exports=f},{"./Crumb":5,"./NavigationData":7,"./ReturnDataManager":10,"./StateContext":11,"./config/StateInfoConfig":19,"./settings":27}],7:[function(t,e,r){var n=function(){function t(){}return t.setDefaults=function(t,e){for(var r in e)null!=t[r]&&t[r].toString()||(t[r]=e[r])},t.clone=function(t){var e={};for(var r in t)e[r]=t[r];return e},t}();e.exports=n},{}],8:[function(t,e,r){var n=t("./StateRouter"),i=t("./history/HashHistoryManager"),a=function(){function t(){this.router=new n,this.historyManager=new i,this.stateIdKey="c0",this.previousStateIdKey="c1",this.returnDataKey="c2",this.crumbTrailKey="c3",this.applicationPath=""}return t}();e.exports=a},{"./StateRouter":14,"./history/HashHistoryManager":22}],9:[function(t,e,r){var n=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},i=t("./TypeConverter"),a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.getType=function(){return"number"},e.prototype.convertFrom=function(t){if(isNaN(+t))throw Error(t+" is not a valid number");return+t},e.prototype.convertTo=function(t){return t.toString()},e}(i);e.exports=a},{"./TypeConverter":16}],10:[function(t,e,r){var n=t("./ConverterFactory"),i=t("./settings"),a=function(){function t(){}return t.formatReturnData=function(t,e){var r=[];for(var n in e)null==e[n]||!e[n].toString()||i.router.supportsDefaults&&e[n]===t.defaults[n]||r.push(this.encodeUrlValue(n)+this.RET_1_SEP+this.formatURLObject(n,e[n],t));return r.join(this.RET_3_SEP)},t.decodeUrlValue=function(t){return t.replace(new RegExp("0"+this.SEPARATOR,"g"),this.SEPARATOR)},t.encodeUrlValue=function(t){return t.replace(new RegExp(this.SEPARATOR,"g"),"0"+this.SEPARATOR)},t.formatURLObject=function(t,e,r){var i=r.defaultTypes[t]?r.defaultTypes[t]:"string",a=n.getKeyFromObject(e),o=n.getConverter(a).convertTo(e);return o=this.encodeUrlValue(o),typeof e!==i&&(o+=this.RET_2_SEP+a),o},t.parseURLString=function(t,e,r){var i=r.defaultTypes[t]?r.defaultTypes[t]:"string",a=e,o=n.getKey(i);if(e.indexOf(this.RET_2_SEP)>-1){var s=e.split(this.RET_2_SEP);a=s[0],o=s[1]}return n.getConverter(o).convertFrom(this.decodeUrlValue(a))},t.parseReturnData=function(t,e){for(var r={},n=t.split(this.RET_3_SEP),i=0;i<n.length;i++){var a=n[i].split(this.RET_1_SEP);r[this.decodeUrlValue(a[0])]=this.parseURLString(this.decodeUrlValue(a[0]),a[1],e)}return r},t.SEPARATOR="_",t.RET_1_SEP="1_",t.RET_2_SEP="2_",t.RET_3_SEP="3_",t}();e.exports=a},{"./ConverterFactory":4,"./settings":27}],11:[function(t,e,r){var n=function(){function t(){}return t.includeCurrentData=function(t,e){if(!e){e=[];for(var r in this.data)e.push(r)}for(var n={},i=0;i<e.length;i++)n[e[i]]=this.data[e[i]];for(var r in t)n[r]=t[r];return n},t.clear=function(t){if(t)this.data[t]=this.state.defaults[t];else for(var e in this.data)this.data[e]=this.state.defaults[e]},t}();e.exports=n},{}],12:[function(t,e,r){var n=t("./CrumbTrailManager"),i=t("./NavigationData"),a=t("./ReturnDataManager"),o=t("./settings"),s=t("./StateContext"),u=t("./config/StateInfoConfig"),f=function(){function t(){}return t.setStateContext=function(t,e){try{s.state=t,s.url=e,s.dialog=t.parent;var r=t.stateHandler.getNavigationData(t,e);s.previousState=n.getState(r[o.previousStateIdKey]),s.previousDialog=null,s.previousState&&(s.previousDialog=s.previousState.parent),n.returnData={},r[o.returnDataKey]&&(n.returnData=a.parseReturnData(r[o.returnDataKey],s.previousState)),n.crumbTrail=r[o.crumbTrailKey],s.data=this.parseData(r,t),n.buildCrumbTrail(),this.crumbs=n.getCrumbs(!0)}catch(i){throw new Error("The Url is invalid\n"+i.message)}},t.onNavigate=function(t){if(!t[this.NAVIGATE_HANDLER_ID]){var e=this.NAVIGATE_HANDLER_ID+this.navigateHandlerId++;t[this.NAVIGATE_HANDLER_ID]=e,this.navigateHandlers[e]=t}},t.offNavigate=function(t){delete this.navigateHandlers[t[this.NAVIGATE_HANDLER_ID]],delete t[this.NAVIGATE_HANDLER_ID]},t.navigate=function(t,e){var r=this.getNavigationLink(t,e);if(null==r)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this._navigateLink(r,this.getNextState(t))},t.getNavigationLink=function(t,e){return n.getHref(this.getNextState(t),e,s.data)},t.canNavigateBack=function(t){var e=!1;return t<=this.crumbs.length&&t>0&&(e=!0),e},t.navigateBack=function(t){var e=this.getNavigationBackLink(t);if(null==e)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this._navigateLink(e,this.getCrumb(t).state)},t.getNavigationBackLink=function(t){return this.getCrumb(t).navigationLink},t.refresh=function(t){var e=this.getRefreshLink(t);if(null==e)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this._navigateLink(e,s.state)},t.getRefreshLink=function(t){return n.getRefreshHref(t)},t.navigateLink=function(t){try{var e=o.router.getData(t.split("?")[0]).state}catch(r){throw new Error("The Url is invalid\n"+r.message)}this._navigateLink(t,e)},t._navigateLink=function(e,r){var n=this;try{var i=s.url,a=s.state,u=r.stateHandler.getNavigationData(r,e);u=this.parseData(u,r)}catch(f){throw new Error("The Url is invalid\n"+f.message)}r.navigating(u,e,function(){if(i===s.url){r.stateHandler.navigateLink(a,r,e),t.setStateContext(r,e),a&&a!==r&&a.dispose(),r.navigated(s.data);for(var u in n.navigateHandlers)e===s.url&&n.navigateHandlers[u](a,r,s.data);e===s.url&&o.historyManager.addHistory(r,e)}})},t.parseData=function(t,e){var r={};for(var n in t)n!==o.previousStateIdKey&&n!==o.returnDataKey&&n!==o.crumbTrailKey&&(r[n]=a.parseURLString(n,t[n],e));return i.setDefaults(r,e.defaults),r},t.getNextState=function(t){var e=null;if(s.state&&s.state.transitions[t]&&(e=s.state.transitions[t].to),!e&&u.dialogs[t]&&(e=u.dialogs[t].initial),!e)throw new Error("The action parameter must be a Dialog key or a Transition key that is a child of the current State");return e},t.getCrumb=function(t){if(t>this.crumbs.length||0>=t)throw new Error("The distance parameter must be greater than zero and less than or equal to the number of Crumbs ("+this.crumbs.length+")");return this.crumbs[this.crumbs.length-t]},t.NAVIGATE_HANDLER_ID="navigateHandlerId",t.navigateHandlerId=1,t.navigateHandlers={},t}();e.exports=f},{"./CrumbTrailManager":6,"./NavigationData":7,"./ReturnDataManager":10,"./StateContext":11,"./config/StateInfoConfig":19,"./settings":27}],13:[function(t,e,r){var n=t("./settings"),i=function(){function t(){}return t.prototype.getNavigationLink=function(t,e){delete e[n.stateIdKey];var r=n.router.getRoute(t,e);if(null==r.route)return null;var i=[];for(var a in e)r.data&&null!=r.data[a]||i.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return i.length>0&&(r.route+="?"+i.join("&")),r.route},t.prototype.navigateLink=function(t,e,r){},t.prototype.getNavigationData=function(t,e){var r=e.indexOf("?"),i=n.router.getData(0>r?e:e.substring(0,r)).data;if(i=i?i:{},r>=0)for(var a=e.substring(r+1),o=a.split("&"),s=0;s<o.length;s++){var u=o[s].split("=");i[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return i},t.prototype.truncateCrumbTrail=function(t,e){var r=[];if(t.parent.initial===t)return r;for(var n=0;n<e.length&&e[n].state!==t;n++)r.push(e[n]);return r},t}();e.exports=i},{"./settings":27}],14:[function(t,e,r){var n=t("./routing/Router"),i=function(){function t(){this.supportsDefaults=!0}return t.prototype.getData=function(t){var e=this.router.match(t);return{state:e.route._state,data:this.router.match(t).data}},t.prototype.getRoute=function(t,e){for(var r=t._route,n={},i=0;i<r.params.length;i++)n[r.params[i].name]=e[r.params[i].name];return{route:r.build(e),data:n}},t.prototype.addRoutes=function(t){this.router=new n;for(var e=[],r=0;r<t.length;r++)for(var i=0;i<t[r]._states.length;i++)e.push(t[r]._states[i]);e.sort(function(t,e){var r="{"===t.route.substring(0,1)?-1:0,n="{"===e.route.substring(0,1)?-1:0;return n-r});for(var r=0;r<e.length;r++){var a=e[r];a._route=this.router.addRoute(a.route,a.formattedDefaults),a._route._state=a}},t}();e.exports=i},{"./routing/Router":25}],15:[function(t,e,r){var n=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},i=t("./TypeConverter"),a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.getType=function(){return"string"},e.prototype.convertFrom=function(t){return t},e.prototype.convertTo=function(t){return t.toString()},e}(i);e.exports=a},{"./TypeConverter":16}],16:[function(t,e,r){var n=function(){function t(){}return t.prototype.getType=function(){return null},t.prototype.convertFrom=function(t){return null},t.prototype.convertTo=function(t){return null},t}();e.exports=n},{}],17:[function(t,e,r){var n=function(){function t(){this._states=[],this.states={}}return t}();e.exports=n},{}],18:[function(t,e,r){var n=t("../StateHandler"),i=function(){function t(){this._transitions=[],this.transitions={},this.defaults={},this.defaultTypes={},this.formattedDefaults={},this.trackCrumbTrail=!0,this.stateHandler=new n,this.dispose=function(){},this.navigated=function(t){},this.navigating=function(t,e,r){r()}}return t}();e.exports=i},{"../StateHandler":13}],19:[function(t,e,r){var n=t("./Dialog"),i=t("../ReturnDataManager"),a=t("../settings"),o=t("./State"),s=t("./Transition"),u=function(){function t(){}return t.build=function(t){this._dialogs=[],this.dialogs={};for(var e=0;e<t.length;e++){var r=t[e],i=new n;i.index=e;for(var o in r)"states"!==o&&(i[o]=r[o]);if(!i.key)throw new Error("key is mandatory for a Dialog");if(this.dialogs[i.key])throw new Error("A Dialog with key "+i.key+" already exists");if(this._dialogs.push(i),this.dialogs[i.key]=i,this.processStates(i,r),this.processTransitions(i,r),i.initial=i.states[r.initial],!r.initial)throw new Error("initial is mandatory for a Dialog");if(!i.initial)throw new Error(i.key+" Dialog's initial key of "+r.initial+" does not match a child State key")}a.router.addRoutes(this._dialogs)},t.processStates=function(t,e){for(var r=0;r<e.states.length;r++){var n=e.states[r],a=new o;a.parent=t,a.index=r,a.id=t.index+"-"+a.index;for(var s in n)"transitions"!==s&&(a[s]=n[s]);for(var s in a.defaults)a.defaultTypes[s]||(a.defaultTypes[s]=typeof a.defaults[s]),a.formattedDefaults[s]=i.formatURLObject(s,a.defaults[s],a);if(!a.key)throw new Error("key is mandatory for a State");if(t.states[a.key])throw new Error("A State with key "+a.key+" already exists for Dialog "+t.key);t._states.push(a),t.states[a.key]=a}},t.processTransitions=function(t,e){for(var r=0;r<e.states.length;r++)if(e.states[r].transitions)for(var n=0;n<e.states[r].transitions.length;n++){var i=e.states[r].transitions[n],a=new s;if(a.index=n,a.key=i.key,!a.key)throw new Error("key is mandatory for a Transition");if(a.parent=t._states[r],a.to=t.states[i.to],!i.to)throw new Error("to is mandatory for a Transition");if(!a.to)throw new Error(t._states[r].key+" State's Transition to key of "+a.key+" does not match a sibling State key");if(a.parent.transitions[a.key])throw new Error("A Transition with key "+a.key+" already exists for State "+t._states[r].key);a.parent._transitions.push(a),a.parent.transitions[a.key]=a}},t._dialogs=[],t.dialogs={},t}();e.exports=u},{"../ReturnDataManager":10,"../settings":27,"./Dialog":17,"./State":18,"./Transition":20}],20:[function(t,e,r){var n=function(){function t(){}return t}();e.exports=n},{}],21:[function(t,e,r){var n=t("./HistoryNavigator"),i=t("../settings"),a=function(){function t(){this.disabled="undefined"==typeof window||!(window.history&&window.history.pushState)}return t.prototype.init=function(){this.disabled||window.addEventListener("popstate",n.navigateHistory)},t.prototype.addHistory=function(t,e){t.title&&"undefined"!=typeof document&&(document.title=t.title),e=i.applicationPath+e,this.disabled||location.pathname+location.search===e||window.history.pushState(null,null,e)},t.prototype.getCurrentUrl=function(){return location.pathname.substring(i.applicationPath.length)+location.search},t.prototype.getHref=function(t){if(!t)throw new Error("The Url is invalid");return i.applicationPath+t},t.prototype.getUrl=function(t){return t.pathname.substring(i.applicationPath.length)+t.search},t}();e.exports=a},{"../settings":27,"./HistoryNavigator":23}],22:[function(t,e,r){var n=t("./HistoryNavigator"),i=function(){function t(){this.disabled="undefined"==typeof window||!("onhashchange"in window),this.replaceQueryIdentifier=!1}return t.prototype.init=function(){this.disabled||(window.addEventListener?window.addEventListener("hashchange",n.navigateHistory):window.attachEvent("onhashchange",n.navigateHistory))},t.prototype.addHistory=function(t,e){t.title&&"undefined"!=typeof document&&(document.title=t.title),e=this.encode(e),this.disabled||location.hash.substring(1)===e||(location.hash=e)},t.prototype.getCurrentUrl=function(){return this.decode(location.hash.substring(1))},t.prototype.getHref=function(t){if(!t)throw new Error("The Url is invalid");return"#"+this.encode(t)},t.prototype.getUrl=function(t){return this.decode(t.hash.substring(1))},t.prototype.encode=function(t){return this.replaceQueryIdentifier?t.replace("?","#"):t},t.prototype.decode=function(t){return this.replaceQueryIdentifier?t.replace("#","?"):t},t}();e.exports=i},{"./HistoryNavigator":23}],23:[function(t,e,r){var n=function(){function t(){}return t}();e.exports=n},{}],24:[function(t,e,r){var n=t("./Segment"),i=function(){function t(t,e){this.segments=[],this.params=[],this.path=t,this.defaults=e?e:{},this.parse()}return t.prototype.parse=function(){for(var t,e=this.path.split("/").reverse(),r="",i=0;i<e.length;i++){t=new n(e[i],t?t.optional:!0,this.defaults),this.segments.unshift(t),r=t.pattern+r;for(var a=[],o=0;o<t.params.length;o++)a.push({name:t.params[o],optional:t.optional});this.params=a.concat(this.params)}this.pattern=new RegExp("^"+r+"$","i")},t.prototype.match=function(t){var e=this.pattern.exec(t);if(!e)return null;for(var r={},n=1;n<e.length;n++){var i=this.params[n-1];e[n]&&(r[i.name]=decodeURIComponent(i.optional?e[n].substring(1):e[n]))}return r},t.prototype.build=function(t){t=null!=t?t:{};for(var e="",r=!0,n=this.segments.length-1;n>=0;n--){var i=this.segments[n],a=i.build(t);if(r=r&&a.optional,!r){if(null==a.path)return null;e="/"+a.path+e}}return 0!==e.length?e:"/"},t}();e.exports=i},{"./Segment":26}],25:[function(t,e,r){var n=t("./Route"),i=function(){function t(){this.routes=[]}return t.prototype.addRoute=function(t,e){t="/"===t.slice(-1)?t.substring(0,t.length-1):t,t="/"===t.substring(0,1)?t.substring(1):t;var r=new n(t,e);return this.routes.push(r),r},t.prototype.match=function(t){t="/"===t.slice(-1)?t.substring(0,t.length-1):t,t="/"===t.substring(0,1)||0===t.length?t:"/"+t;for(var e=0;e<this.routes.length;e++){var r=this.routes[e],n=r.match(t);if(n){for(var i in r.defaults)n[i]||(n[i]=r.defaults[i]);return{route:r,data:n}}}return null},t}();e.exports=i},{"./Route":24}],26:[function(t,e,r){var n=function(){function t(t,e,r){this.params=[],this.paramsPattern=/\{([^}]+)\}/g,this.escapePattern=/[\.+*\^$\[\](){}']/g,this.path=t,this.optional=e,this.defaults=r,this.parse()}return t.prototype.parse=function(){var t=this,e=0===this.path.length,r=function(r,n){var i="?"===n.slice(-1)?n.substring(0,n.length-1):n;t.params.push(i);var a="?"===n.slice(-1)||t.defaults[i];return e=t.path.length===r.length&&a,"?"};this.pattern=this.path.replace(this.paramsPattern,r),this.optional=this.optional&&e,this.pattern=this.pattern.replace(this.escapePattern,"\\$&"),this.pattern=this.optional?this.pattern.replace(/\?/,"(/[^/]+)?"):"/"+this.pattern.replace(/\?/g,"([^/]+)")},t.prototype.build=function(t){var e=this,r=this.optional,n=!1,i=function(i,a){var o="?"===a.slice(-1)?a.substring(0,a.length-1):a;r=r&&(!t[o]||t[o]===e.defaults[o]);var s=t[o]?t[o]:e.defaults[o];return n=n||!s,encodeURIComponent(s)},a=this.path.replace(this.paramsPattern,i);return{path:n?null:a,optional:r}},t}();e.exports=n},{}],27:[function(t,e,r){var n=t("./NavigationSettings"),i=new n;e.exports=i},{"./NavigationSettings":8}]},{},[1])(1)});