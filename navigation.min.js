/**
 * Navigation v1.2.0
 * (c) Graham Mendick - http://grahammendick.github.io/navigation/
 * License: Apache License 2.0
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Navigation=t()}}(function(){return function t(e,r,n){function i(o,s){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[o]={exports:{}};e[o][0].call(h.exports,function(t){var r=e[o][1][t];return i(r?r:t)},h,h.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./TypeConverter"),a=function(t){function e(e){t.call(this),this.converter=e}return n(e,t),e.prototype.getType=function(){return this.converter.getType()+"array"},e.prototype.convertFrom=function(t){var r=[];if(0!==t.length)for(var n=t.split(e.SEPARATOR1),i=0;i<n.length;i++)0!==n[i].length?r.push(this.converter.convertFrom(n[i].replace(new RegExp(e.SEPARATOR2,"g"),e.SEPARATOR))):r.push(null);return r},e.prototype.convertTo=function(t){for(var r=[],n=t,i=0;i<n.length;i++)null!=n[i]&&r.push(this.converter.convertTo(n[i]).replace(new RegExp(e.SEPARATOR,"g"),e.SEPARATOR2));return r.join(e.SEPARATOR1)},e.SEPARATOR="-",e.SEPARATOR1="1-",e.SEPARATOR2="2-",e}(i);e.exports=a},{"./TypeConverter":18}],2:[function(t,e,r){var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./TypeConverter"),a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.getType=function(){return"boolean"},e.prototype.convertFrom=function(t){if("true"!==t&&"false"!==t)throw Error(t+" is not a valid boolean");return"true"===t},e.prototype.convertTo=function(t){return t.toString()},e}(i);e.exports=a},{"./TypeConverter":18}],3:[function(t,e,r){var n=t("./ArrayConverter"),i=t("./BooleanConverter"),a=t("./NumberConverter"),o=t("./StringConverter"),s=function(){function t(){}return t.init=function(){this.typeArray=[],this.typeArray.push(function(){return new o}),this.typeArray.push(function(){return new i}),this.typeArray.push(function(){return new a}),this.keyToConverterList={},this.typeToKeyList={};for(var t=0;t<this.typeArray.length;t++)this.keyToConverterList[t.toString()]=this.typeArray[t](),this.keyToConverterList["a"+t]=new n(this.typeArray[t]()),this.typeToKeyList[this.typeArray[t]().getType()]=t.toString(),this.typeToKeyList[new n(this.typeArray[t]()).getType()]="a"+t},t.getKey=function(t){return this.typeToKeyList[t]},t.getKeyFromObject=function(t){var e,r=typeof t;if("[object Array]"===Object.prototype.toString.call(t)){var n=t;e="string";for(var i=0;i<n.length;i++)if(null!=n[i]){e=typeof n[i];break}r=e+"array"}if(!this.typeToKeyList[r])throw new Error(r);return this.typeToKeyList[r]},t.getConverter=function(t){return this.keyToConverterList[t]},t}();s.init(),e.exports=s},{"./ArrayConverter":1,"./BooleanConverter":2,"./NumberConverter":10,"./StringConverter":17}],4:[function(t,e,r){var n=t("./NavigationData"),i=function(){function t(t,e,r,i){this.data=t?t:{},this.state=e,this.last=i,this.title=e.title,this.navigationLink=r,n.setDefaults(this.data,this.state.defaults)}return t}();e.exports=i},{"./NavigationData":8}],5:[function(t,e,r){var n=t("./Crumb"),i=t("./NavigationData"),a=t("./ReturnDataManager"),o=t("./settings"),s=t("./StateContext"),u=t("./config/StateInfoConfig"),l=function(){function t(){}return t.buildCrumbTrail=function(t){var e=this.getCrumbs(!1);t&&e.push(new n(s.previousData,s.previousState,this.getHref(s.previousState,s.previousData,null),!1)),e=s.state.stateHandler.truncateCrumbTrail(s.state,e),o.combineCrumbTrail&&e.push(new n(s.data,s.state,this.getHref(s.state,s.data,null),!1)),e.reverse();for(var r="",i=0;i<e.length;i++)r+=this.CRUMB_1_SEP+e[i].state.id+this.CRUMB_2_SEP,r+=a.formatReturnData(e[i].state,e[i].data);this.crumbTrail=r?r:null,this.crumbTrailKey=o.crumbTrailPersister.save(this.crumbTrail)},t.getCrumbs=function(t,e){for(var r=[],i=0,o=this.crumbTrail,s=o?o.split(this.CRUMB_1_SEP).length-1:0,u=!0;s>i;){var l=o.substring(this.CRUMB_1_SEP.length).split(this.CRUMB_2_SEP)[0],h=this.getState(l),f={},p=o.substring(o.indexOf(this.CRUMB_2_SEP)+this.CRUMB_2_SEP.length).split(this.CRUMB_1_SEP)[0];p&&(f=a.parseReturnData(p,h));var c=o.indexOf(this.CRUMB_1_SEP,1);o=-1!=c?o.substring(c):"",e||(r.push(new n(f,h,this.getHref(h,f,null),t&&u)),u=!1),e=!1,i++}return r.reverse(),r},t.getState=function(t){if(!t)return null;var e=t.split("-");return u._dialogs[+e[0]]._states[+e[1]]},t.getHref=function(t,e,r){var n={};n[o.stateIdKey]=t.id,!o.combineCrumbTrail&&t.trackCrumbTrail&&s.state&&(n[o.previousStateIdKey]=s.state.id),o.router.supportsDefaults||(e=i.clone(e),i.setDefaults(e,t.defaults));for(var u in e){var l=e[u];null!=l&&l.toString()&&(l=a.formatURLObject(u,l,t),o.router.supportsDefaults&&l===t.formattedDefaults[u]||(n[u]=l))}if(!o.combineCrumbTrail&&t.trackCrumbTrail&&s.state){o.trackAllPreviousData&&(r=s.data);var h=a.formatReturnData(s.state,r);h&&(n[o.returnDataKey]=h)}return this.crumbTrailKey&&t.trackCrumbTrail&&(n[o.crumbTrailKey]=this.crumbTrailKey),t.stateHandler.getNavigationLink(t,n)},t.getRefreshHref=function(t){return this.getHref(s.state,t,null)},t.crumbTrail=null,t.crumbTrailKey=null,t.CRUMB_1_SEP="4_",t.CRUMB_2_SEP="5_",t}();e.exports=l},{"./Crumb":4,"./NavigationData":8,"./ReturnDataManager":11,"./StateContext":12,"./config/StateInfoConfig":21,"./settings":30}],6:[function(t,e,r){var n=function(){function t(){}return t.prototype.load=function(t){return t},t.prototype.save=function(t){return t},t}();e.exports=n},{}],7:[function(t,e,r){var n=t("./StateContext"),i=t("./StateController"),a=t("./config/Dialog"),o=t("./config/State"),s=t("./config/Transition"),u=t("./config/StateInfoConfig"),l=t("./history/HistoryAction"),h=t("./history/HistoryNavigator"),f=t("./history/HashHistoryManager"),p=t("./history/HTML5HistoryManager"),c=t("./CrumbTrailPersister"),g=t("./StorageCrumbTrailPersister"),d=t("./Crumb"),v=t("./StateHandler"),y=t("./StateRouter"),m=t("./NavigationSettings"),S=t("./routing/Route"),T=t("./routing/Router"),b=t("./settings"),C=function(){function t(){}return t.Dialog=a,t.State=o,t.Transition=s,t.StateInfoConfig=u,t.HistoryAction=l,t.HashHistoryManager=f,t.HTML5HistoryManager=p,t.CrumbTrailPersister=c,t.StorageCrumbTrailPersister=g,t.Crumb=d,t.NavigationSettings=m,t.StateContext=n,t.StateController=i,t.StateHandler=v,t.StateRouter=y,t.Route=S,t.Router=T,t.settings=b,t.start=function(t){b.historyManager.init(),i.navigateLink(t?t:b.historyManager.getCurrentUrl())},t}();h.navigateHistory=function(){n.url!==b.historyManager.getCurrentUrl()&&i.navigateLink(b.historyManager.getCurrentUrl(),!0)},e.exports=C},{"./Crumb":4,"./CrumbTrailPersister":6,"./NavigationSettings":9,"./StateContext":12,"./StateController":13,"./StateHandler":14,"./StateRouter":15,"./StorageCrumbTrailPersister":16,"./config/Dialog":19,"./config/State":20,"./config/StateInfoConfig":21,"./config/Transition":22,"./history/HTML5HistoryManager":23,"./history/HashHistoryManager":24,"./history/HistoryAction":25,"./history/HistoryNavigator":26,"./routing/Route":27,"./routing/Router":28,"./settings":30}],8:[function(t,e,r){var n=function(){function t(){}return t.setDefaults=function(t,e){for(var r in e)null!=t[r]&&t[r].toString()||(t[r]=e[r])},t.clone=function(t){var e={};for(var r in t)e[r]=t[r];return e},t}();e.exports=n},{}],9:[function(t,e,r){var n=t("./StateRouter"),i=t("./history/HashHistoryManager"),a=t("./CrumbTrailPersister"),o=function(){function t(){this.router=new n,this.historyManager=new i,this.crumbTrailPersister=new a,this.stateIdKey="c0",this.previousStateIdKey="c1",this.returnDataKey="c2",this.crumbTrailKey="c3",this.applicationPath="",this.combineCrumbTrail=!1,this.trackAllPreviousData=!0}return t}();e.exports=o},{"./CrumbTrailPersister":6,"./StateRouter":15,"./history/HashHistoryManager":24}],10:[function(t,e,r){var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./TypeConverter"),a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.getType=function(){return"number"},e.prototype.convertFrom=function(t){if(isNaN(+t))throw Error(t+" is not a valid number");return+t},e.prototype.convertTo=function(t){return t.toString()},e}(i);e.exports=a},{"./TypeConverter":18}],11:[function(t,e,r){var n=t("./ConverterFactory"),i=t("./settings"),a=function(){function t(){}return t.formatReturnData=function(t,e){var r=[];for(var n in e)if(null!=e[n]&&e[n].toString()){var a=this.formatURLObject(n,e[n],t,!0);i.router.supportsDefaults&&a===t.formattedDefaults[n]||r.push(this.encodeUrlValue(n)+this.RET_1_SEP+a)}return r.join(this.RET_3_SEP)},t.decodeUrlValue=function(t){return t.replace(new RegExp("0"+this.SEPARATOR,"g"),this.SEPARATOR)},t.encodeUrlValue=function(t){return t.replace(new RegExp(this.SEPARATOR,"g"),"0"+this.SEPARATOR)},t.formatURLObject=function(t,e,r,i){i=i||r.trackTypes;var a=r.defaultTypes[t]?r.defaultTypes[t]:"string",o=n.getKeyFromObject(e),s=n.getConverter(o).convertTo(e);return i&&(s=this.encodeUrlValue(s)),r.trackTypes&&typeof e!==a&&(s+=this.RET_2_SEP+o),s},t.parseURLString=function(t,e,r,i){i=i||r.trackTypes;var a=r.defaultTypes[t]?r.defaultTypes[t]:"string",o=e,s=n.getKey(a);if(r.trackTypes&&e.indexOf(this.RET_2_SEP)>-1){var u=e.split(this.RET_2_SEP);o=u[0],s=u[1]}return i&&(o=this.decodeUrlValue(o)),n.getConverter(s).convertFrom(o)},t.parseReturnData=function(t,e){for(var r={},n=t.split(this.RET_3_SEP),i=0;i<n.length;i++){var a=n[i].split(this.RET_1_SEP);r[this.decodeUrlValue(a[0])]=this.parseURLString(this.decodeUrlValue(a[0]),a[1],e,!0)}return r},t.SEPARATOR="_",t.RET_1_SEP="1_",t.RET_2_SEP="2_",t.RET_3_SEP="3_",t}();e.exports=a},{"./ConverterFactory":3,"./settings":30}],12:[function(t,e,r){var n=function(){function t(){}return t.includeCurrentData=function(t,e){if(!e){e=[];for(var r in this.data)e.push(r)}for(var n={},i=0;i<e.length;i++)n[e[i]]=this.data[e[i]];for(var r in t)n[r]=t[r];return n},t.clear=function(t){if(t)this.data[t]=this.state.defaults[t];else for(var e in this.data)this.data[e]=this.state.defaults[e]},t.oldState=null,t.oldDialog=null,t.oldData={},t.previousState=null,t.previousDialog=null,t.previousData={},t.state=null,t.dialog=null,t.data={},t.url=null,t.title=null,t}();e.exports=n},{}],13:[function(t,e,r){var n=t("./CrumbTrailManager"),i=t("./history/HistoryAction"),a=t("./NavigationData"),o=t("./ReturnDataManager"),s=t("./settings"),u=t("./StateContext"),l=t("./config/StateInfoConfig"),h=function(){function t(){}return t.setStateContext=function(t,e){try{this.setOldStateContext(),u.state=t,u.url=e,u.dialog=t.parent,u.title=t.title;var r=t.stateHandler.getNavigationData(t,e);u.data=this.parseData(r,t),u.previousState=null,u.previousDialog=null,u.previousData={},n.crumbTrail=s.crumbTrailPersister.load(r[s.crumbTrailKey]);var i=!!r[s.previousStateIdKey];this.setPreviousStateContext(i,r),n.buildCrumbTrail(i),this.crumbs=n.getCrumbs(!0,s.combineCrumbTrail)}catch(a){throw new Error("The Url is invalid\n"+a.message)}},t.clearStateContext=function(){u.oldState=null,u.oldDialog=null,u.oldData={},u.previousState=null,u.previousDialog=null,u.previousData={},u.state=null,u.dialog=null,u.data={},u.url=null,u.title=null,n.crumbTrail=null,n.crumbTrailKey=null},t.setOldStateContext=function(){u.state&&(u.oldState=u.state,u.oldDialog=u.dialog,u.oldData=a.clone(u.data),a.setDefaults(u.oldData,u.oldState.defaults))},t.setPreviousStateContext=function(t,e){if(t)u.previousState=n.getState(e[s.previousStateIdKey]),u.previousState&&(u.previousDialog=u.previousState.parent),e[s.returnDataKey]&&(u.previousData=o.parseReturnData(e[s.returnDataKey],u.previousState));else{var r=n.getCrumbs(!1).pop();r&&(u.previousState=r.state,u.previousDialog=u.previousState.parent,u.previousData=r.data)}},t.onNavigate=function(t){if(!t[this.NAVIGATE_HANDLER_ID]){var e=this.NAVIGATE_HANDLER_ID+this.navigateHandlerId++;t[this.NAVIGATE_HANDLER_ID]=e,this.navigateHandlers[e]=t}},t.offNavigate=function(t){delete this.navigateHandlers[t[this.NAVIGATE_HANDLER_ID]],delete t[this.NAVIGATE_HANDLER_ID]},t.navigate=function(t,e,r){var n=this.getNavigationLink(t,e);if(null==n)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this._navigateLink(n,this.getNextState(t),!1,r)},t.getNavigationLink=function(t,e){return n.getHref(this.getNextState(t),e,u.data)},t.canNavigateBack=function(t){var e=!1;return t<=this.crumbs.length&&t>0&&(e=!0),e},t.navigateBack=function(t,e){var r=this.getNavigationBackLink(t);if(null==r)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this._navigateLink(r,this.getCrumb(t).state,!1,e)},t.getNavigationBackLink=function(t){return this.getCrumb(t).navigationLink},t.refresh=function(t,e){var r=this.getRefreshLink(t);if(null==r)throw new Error("Invalid route data, a mandatory route parameter has not been supplied a value");this._navigateLink(r,u.state,!1,e)},t.getRefreshLink=function(t){return n.getRefreshHref(t)},t.navigateLink=function(t,e,r){try{var n=s.router.getData(t.split("?")[0]).state}catch(i){throw new Error("The Url is invalid\n"+i.message)}this._navigateLink(t,n,e,r)},t._navigateLink=function(t,e,r,n){void 0===r&&(r=!1),void 0===n&&(n=i.Add);try{var a=u.url,o=e.stateHandler.getNavigationData(e,t);o=this.parseData(o,e)}catch(s){throw new Error("The Url is invalid\n"+s.message)}var l=this.getNavigateContinuation(a,e,t,n),h=function(){a===u.url&&e.navigating(o,t,l,r)};u.state?u.state.unloading(e,o,t,h,r):e.navigating(o,t,l,r)},t.getNavigateContinuation=function(e,r,n,a){var o=this;return function(l){if(e===u.url){r.stateHandler.navigateLink(u.state,r,n),t.setStateContext(r,n),u.oldState&&u.oldState!==r&&u.oldState.dispose(),r.navigated(u.data,l);for(var h in o.navigateHandlers)n===u.url&&o.navigateHandlers[h](u.oldState,r,u.data);n===u.url&&(a!==i.None&&s.historyManager.addHistory(r,n,a===i.Replace),u.title&&"undefined"!=typeof document&&(document.title=u.title))}}},t.parseData=function(t,e){var r={};for(var n in t)n!==s.previousStateIdKey&&n!==s.returnDataKey&&n!==s.crumbTrailKey&&(r[n]=o.parseURLString(n,t[n],e));return a.setDefaults(r,e.defaults),r},t.getNextState=function(t){var e=null;if(u.state&&u.state.transitions[t]&&(e=u.state.transitions[t].to),!e&&l.dialogs[t]&&(e=l.dialogs[t].initial),!e)throw new Error("The action parameter must be a Dialog key or a Transition key that is a child of the current State");return e},t.getCrumb=function(t){if(t>this.crumbs.length||0>=t)throw new Error("The distance parameter must be greater than zero and less than or equal to the number of Crumbs ("+this.crumbs.length+")");return this.crumbs[this.crumbs.length-t]},t.NAVIGATE_HANDLER_ID="navigateHandlerId",t.navigateHandlerId=1,t.navigateHandlers={},t}();e.exports=h},{"./CrumbTrailManager":5,"./NavigationData":8,"./ReturnDataManager":11,"./StateContext":12,"./config/StateInfoConfig":21,"./history/HistoryAction":25,"./settings":30}],14:[function(t,e,r){var n=t("./settings"),i=function(){function t(){}return t.prototype.getNavigationLink=function(t,e){var r=n.router.getRoute(t,e);if(null==r.route)return null;var i=[];for(var a in e)a===n.stateIdKey||r.data[a]||i.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return i.length>0&&(r.route+="?"+i.join("&")),r.route},t.prototype.navigateLink=function(t,e,r){},t.prototype.getNavigationData=function(t,e){var r=e.indexOf("?"),i=n.router.getData(0>r?e:e.substring(0,r)).data;if(i=i?i:{},r>=0)for(var a=e.substring(r+1),o=a.split("&"),s=0;s<o.length;s++){var u=o[s].split("=");i[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return i},t.prototype.truncateCrumbTrail=function(t,e){var r=[];if(t.parent.initial===t)return r;for(var n=0;n<e.length&&e[n].state!==t;n++)r.push(e[n]);return r},t}();e.exports=i},{"./settings":30}],15:[function(t,e,r){var n=t("./routing/Router"),i=function(){function t(){this.supportsDefaults=!0}return t.prototype.getData=function(t){var e=this.router.match(t);return{state:e.route._state,data:this.router.match(t).data}},t.prototype.getRoute=function(e,r){var n=e._routeInfo,i="";for(var a in n.params)r[a]&&(i+=n.params[a]+",");i=i.slice(0,-1);var o=n.matches[i],s=null;if(o)s=o.route.build(r);else{var u=t.findBestMatch(n.routes,r);u&&(s=u.routePath,o={route:u.route,data:u.data},n.matches[i]=o)}return{route:s,data:o?o.data:{}}},t.findBestMatch=function(t,e){for(var r,n=-1,i=0;i<t.length;i++){var a=t[i],o=a.build(e);if(o){for(var s=0,u={},l=0;l<a.params.length;l++)e[a.params[l].name]&&(u[a.params[l].name]={},s++);s>n&&(r={route:a,data:u,routePath:o},n=s)}}return r},t.prototype.addRoutes=function(t){this.router=new n;for(var e=0;e<t.length;e++)for(var r=0;r<t[e]._states.length;r++)this.addStateRoutes(t[e]._states[r]);this.router.sort(function(t,e){var r="{"===t.path.charAt(0)?-1:0,n="{"===e.path.charAt(0)?-1:0;return n-r})},t.prototype.addStateRoutes=function(e){for(var r={routes:[],params:{},matches:{}},n=0,i=t.getRoutes(e),a=0;a<i.length;a++){for(var o=this.router.addRoute(i[a],e.formattedDefaults),s=0;s<o.params.length;s++){var u=o.params[s];r.params[u.name]||(r.params[u.name]=n,n++)}r.routes.push(o),o._state=e}e._routeInfo=r},t.getRoutes=function(t){var e=[],r=t.route;if("string"==typeof r)e.push(r);else for(var n=0;n<r.length;n++)e.push(r[n]);return e},t}();e.exports=i},{"./routing/Router":28}],16:[function(t,e,r){var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./CrumbTrailPersister"),a=t("./StateContext"),o=t("./settings"),s=function(t){function e(e,r,n){if(void 0===e&&(e=500),void 0===r&&(r=100),t.call(this),o.combineCrumbTrail=!0,this.maxLength=e,this.historySize=r,this.storage=n,!this.storage)try{localStorage.setItem("CrumbTrail","CrumbTrail"),localStorage.removeItem("CrumbTrail"),this.storage=localStorage}catch(i){this.storage=new u}}return n(e,t),e.prototype.load=function(t){if(!t)return t;if(t&&t.match(/^[a-z]/i)){var e=t.match(/[a-z]\d*/gi),r=this.storage.getItem("CrumbTrail"+e[2]);return r&&0===r.indexOf(e[0]+e[1]+"=")?r.substring(r.indexOf("=")+1):null}return t},e.prototype.save=function(t){if(!t)return t;if(t.length>this.maxLength){var r=0;null!=this.storage.getItem("CrumbTrailCount")&&(r=+this.storage.getItem("CrumbTrailCount"));var n=e.toCode(a.dialog.index),i=e.toCode(a.state.index),o=e.toCode(r%(10*this.historySize));if(r>=this.historySize){var s=e.toCode((r-this.historySize)%(10*this.historySize));this.storage.removeItem("CrumbTrail"+s)}return this.storage.setItem("CrumbTrail"+o,n+i+"="+t),this.storage.setItem("CrumbTrailCount",(r+1).toString()),n+i+o}return t},e.toCode=function(t){var e=t%52,r=Math.floor(t/52);return String.fromCharCode((26>e?97:39)+e)+(r?r.toString():"")},e}(i),u=function(){function t(){this.store={}}return t.prototype.clear=function(){throw new Error("Not implemented")},t.prototype.key=function(t){throw new Error("Not implemented")},t.prototype.getItem=function(t){return this.store[t]},t.prototype.setItem=function(t,e){this.store[t]=e},t.prototype.removeItem=function(t){delete this.store[t]},t}();e.exports=s},{"./CrumbTrailPersister":6,"./StateContext":12,"./settings":30}],17:[function(t,e,r){var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./TypeConverter"),a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.getType=function(){return"string"},e.prototype.convertFrom=function(t){return t},e.prototype.convertTo=function(t){return t.toString()},e}(i);e.exports=a},{"./TypeConverter":18}],18:[function(t,e,r){var n=function(){function t(){}return t.prototype.getType=function(){return null},t.prototype.convertFrom=function(t){return null},t.prototype.convertTo=function(t){return null},t}();e.exports=n},{}],19:[function(t,e,r){var n=function(){function t(){this._states=[],this.states={}}return t}();e.exports=n},{}],20:[function(t,e,r){var n=t("../StateHandler"),i=function(){function t(){this._transitions=[],this.transitions={},this.defaults={},this.defaultTypes={},this.formattedDefaults={},this.trackCrumbTrail=!0,this.trackTypes=!0,this.stateHandler=new n,this.unloading=function(t,e,r,n){n()},this.navigating=function(t,e,r){r()},this.dispose=function(){},this.navigated=function(t){}}return t}();e.exports=i},{"../StateHandler":14}],21:[function(t,e,r){var n=t("./Dialog"),i=t("../ReturnDataManager"),a=t("../settings"),o=t("./State"),s=t("./Transition"),u=function(){function t(){}return t.build=function(t){this._dialogs=[],this.dialogs={};for(var e=0;e<t.length;e++){var r=t[e],i=new n;i.index=e;for(var o in r)"states"!==o&&(i[o]=r[o]);if(!i.key)throw new Error("key is mandatory for a Dialog");if(this.dialogs[i.key])throw new Error("A Dialog with key "+i.key+" already exists");if(this._dialogs.push(i),this.dialogs[i.key]=i,this.processStates(i,r),this.processTransitions(i,r),i.initial=i.states[r.initial],!r.initial)throw new Error("initial is mandatory for a Dialog");if(!i.initial)throw new Error(i.key+" Dialog's initial key of "+r.initial+" does not match a child State key")}a.router.addRoutes(this._dialogs)},t.processStates=function(t,e){for(var r=0;r<e.states.length;r++){var n=e.states[r],a=new o;a.parent=t,a.index=r,a.id=t.index+"-"+a.index;for(var s in n)"transitions"!==s&&(a[s]=n[s]);for(var s in a.defaults)a.defaultTypes[s]||(a.defaultTypes[s]=typeof a.defaults[s]),a.formattedDefaults[s]=i.formatURLObject(s,a.defaults[s],a);if(!a.key)throw new Error("key is mandatory for a State");if(t.states[a.key])throw new Error("A State with key "+a.key+" already exists for Dialog "+t.key);t._states.push(a),t.states[a.key]=a}},t.processTransitions=function(t,e){for(var r=0;r<e.states.length;r++)if(e.states[r].transitions)for(var n=0;n<e.states[r].transitions.length;n++){var i=e.states[r].transitions[n],a=new s;if(a.index=n,a.key=i.key,!a.key)throw new Error("key is mandatory for a Transition");if(a.parent=t._states[r],a.to=t.states[i.to],!i.to)throw new Error("to is mandatory for a Transition");if(!a.to)throw new Error(t._states[r].key+" State's Transition to key of "+a.key+" does not match a sibling State key");if(a.parent.transitions[a.key])throw new Error("A Transition with key "+a.key+" already exists for State "+t._states[r].key);a.parent._transitions.push(a),a.parent.transitions[a.key]=a}},t._dialogs=[],t.dialogs={},t}();e.exports=u},{"../ReturnDataManager":11,"../settings":30,"./Dialog":19,"./State":20,"./Transition":22}],22:[function(t,e,r){var n=function(){function t(){}return t}();e.exports=n},{}],23:[function(t,e,r){var n=t("./HistoryNavigator"),i=t("../settings"),a=t("../StateContext"),o=function(){function t(){this.disabled="undefined"==typeof window||!(window.history&&window.history.pushState)}return t.prototype.init=function(){this.disabled||window.addEventListener("popstate",n.navigateHistory)},t.prototype.addHistory=function(t,e,r){e=null!=e?e:a.url,e=i.applicationPath+e,this.disabled||location.pathname+location.search===e||(r?window.history.replaceState(null,null,e):window.history.pushState(null,null,e))},t.prototype.getCurrentUrl=function(){return location.pathname.substring(i.applicationPath.length)+location.search},t.prototype.getHref=function(t){if(!t)throw new Error("The Url is invalid");return i.applicationPath+t},t.prototype.getUrl=function(t){return t.pathname.substring(i.applicationPath.length)+t.search},t}();e.exports=o},{"../StateContext":12,"../settings":30,"./HistoryNavigator":26}],24:[function(t,e,r){var n=t("./HistoryNavigator"),i=t("../StateContext"),a=function(){function t(){this.disabled="undefined"==typeof window||!("onhashchange"in window),this.replaceQueryIdentifier=!1}return t.prototype.init=function(){this.disabled||(window.addEventListener?window.addEventListener("hashchange",n.navigateHistory):window.attachEvent("onhashchange",n.navigateHistory))},t.prototype.addHistory=function(t,e,r){e=null!=e?e:i.url,e="#"+this.encode(e),this.disabled||location.hash===e||(r?location.replace(e):location.hash=e)},t.prototype.getCurrentUrl=function(){return this.decode(location.hash.substring(1))},t.prototype.getHref=function(t){if(!t)throw new Error("The Url is invalid");return"#"+this.encode(t)},t.prototype.getUrl=function(t){return this.decode(t.hash.substring(1))},t.prototype.encode=function(t){return this.replaceQueryIdentifier?t.replace("?","#"):t},t.prototype.decode=function(t){return this.replaceQueryIdentifier?t.replace("#","?"):t},t}();e.exports=a},{"../StateContext":12,"./HistoryNavigator":26}],25:[function(t,e,r){var n;!function(t){t[t.Add=0]="Add",t[t.Replace=1]="Replace",t[t.None=2]="None"}(n||(n={})),e.exports=n},{}],26:[function(t,e,r){var n=function(){function t(){}return t}();e.exports=n},{}],27:[function(t,e,r){var n=t("./Segment"),i=function(){function t(t,e){this.segments=[],this.params=[],this.path=t,this.defaults=e?e:{},this.parse()}return t.prototype.parse=function(){for(var t,e=this.path.split("/").reverse(),r="",i=0;i<e.length;i++){t=new n(e[i],t?t.optional:!0,this.defaults),this.segments.unshift(t),r=t.pattern+r;for(var a=[],o=0;o<t.params.length;o++)a.push({name:t.params[o],optional:t.optional});this.params=a.concat(this.params)}this.pattern=new RegExp("^"+r+"$","i")},t.prototype.match=function(t){var e=this.pattern.exec(t);if(!e)return null;for(var r={},n=1;n<e.length;n++){var i=this.params[n-1];e[n]&&(r[i.name]=decodeURIComponent(i.optional?e[n].substring(1):e[n]))}return r},t.prototype.build=function(t){t=null!=t?t:{};for(var e="",r=!0,n=this.segments.length-1;n>=0;n--){var i=this.segments[n],a=i.build(t);if(r=r&&a.optional,!r){if(null==a.path)return null;e="/"+a.path+e}}return 0!==e.length?e:"/"},t}();e.exports=i},{"./Segment":29}],28:[function(t,e,r){var n=t("./Route"),i=function(){function t(){this.routes=[]}return t.prototype.addRoute=function(t,e){t="/"===t.slice(-1)?t.substring(0,t.length-1):t,t="/"===t.substring(0,1)?t.substring(1):t;var r=new n(t,e);return this.routes.push(r),r},t.prototype.match=function(t){t="/"===t.slice(-1)?t.substring(0,t.length-1):t,t="/"===t.substring(0,1)||0===t.length?t:"/"+t;for(var e=0;e<this.routes.length;e++){var r=this.routes[e],n=r.match(t);if(n){for(var i in r.defaults)n[i]||(n[i]=r.defaults[i]);return{route:r,data:n}}}return null},t.prototype.sort=function(t){this.routes.sort(t)},t}();e.exports=i},{"./Route":27}],29:[function(t,e,r){var n=function(){function t(t,e,r){this.pattern="",this.params=[],this.subSegments=[],this.subSegmentPattern=/[{]{0,1}[^{}]+[}]{0,1}/g,this.escapePattern=/[\.+*\^$\[\](){}']/g,this.path=t,this.optional=e,this.defaults=r,this.parse()}return t.prototype.parse=function(){if(0!==this.path.length){for(var t=this.path.match(this.subSegmentPattern),e=0;e<t.length;e++){var r=t[e];if("{"==r.charAt(0)){var n=r.substring(1,r.length-1),i="?"===n.slice(-1)?n.slice(0,-1):n;this.params.push(i),this.subSegments.push({name:i,param:!0});var a="?"===n.slice(-1)||this.defaults[i];this.optional=this.optional&&this.path.length===r.length&&a,this.pattern+=this.optional?"(/[^/]+)?":"([^/]+)"}else this.optional=!1,this.subSegments.push({name:r,param:!1}),this.pattern+=r.replace(this.escapePattern,"\\$&")}this.optional||(this.pattern="/"+this.pattern)}},t.prototype.build=function(t){for(var e="",r=this.optional,n=!1,i=0;i<this.subSegments.length;i++){var a=this.subSegments[i];if(a.param){var o=t[a.name],s=this.defaults[a.name];r=r&&(!o||o===s),o=o?o:s,n=n||!o,e+=encodeURIComponent(o)}else e+=a.name}return{path:n?null:e,optional:r}},t}();e.exports=n},{}],30:[function(t,e,r){var n=t("./NavigationSettings"),i=new n;e.exports=i},{"./NavigationSettings":9}]},{},[7])(7)});